# takki og skjár/teningur

from machine import Pin, SoftI2C
from I2C_LCD import I2cLcd
import random
import time

# I2C setup fyrir LCD
i2c = SoftI2C(scl=Pin(13), sda=Pin(14), freq=400000)

# Initialize LCD (reynir 0x3f, annars 39)
try:
    lcd = I2cLcd(i2c, 0x3f, 2, 16)
except:
    lcd = I2cLcd(i2c, 39, 2, 16)

# Takki tengdur við GPIO 0
button = Pin(0, Pin.IN, Pin.PULL_UP)  # pull-up = óýtt = 1, ýtt = 0

# Previous button state til að greina einungis fallandi jaðarpunkt (press)
prev_state = 1

def roll_dice():
    number = random.randint(1,6)
    lcd.clear()
    lcd.move_to(0,0)
    lcd.putstr("yttu a takkan!")
    lcd.move_to(0,1)
    lcd.putstr(str(number))
    return number

# Main loop: bíður eftir takkaslögum
while True:
    state = button.value()
    if prev_state == 1 and state == 0:  # detect button press
        roll_dice()
        time.sleep(0.2)  # debounce
    prev_state = state
    time.sleep(0.01)


